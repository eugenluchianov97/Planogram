import{D as V}from"./DashboardLayout-CbK7N0V9.js";import{Z as k,p as i,e as a,o as d,b as r,w as p,a as e,i as S,l as m,g as c,q as h,f as C,F as f,h as q,t as B,A as D,y as L,z as E,s as g}from"./app-DoIGVFwv.js";import{S as U}from"./sweetalert2-CSiI7rv6.js";import{I as H}from"./IError-gG1LXeg_.js";import{C as I}from"./vue-select-dStCMpHa.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={components:{DashboardLayout:V,vSelect:I,IError:H,Head:k},props:{shops:{type:Array,default:[]},admin:{type:Object,default:{}}},data(){return{item:{name:"",login:"",password:"",shop_id:"",showcases:""},showcases:[],errors:[]}},mounted(){this.item=this.admin,this.changeShop()},methods:{submit(){g.put(route("users.update",this.item.id),this.item).then(n=>{U.fire({title:"Пользователь успешно обновлен",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,icon:"success",toast:!0,position:"top-end"}).then(s=>{window.location.href=route("users.index")})}).catch(n=>{console.log(n),this.errors=n.response.data.errors})},changeShop(){this.item.shop_id&&(this.showcases=[],g.get(route("users.index",{source:"showcases",shop_id:this.item.shop_id})).then(n=>{this.showcases=n.data.showcases}))}}},j={class:""},A={class:""},F={class:""},P={class:"col-span-2 border-t-2 pt-3"},T={class:"grid grid-cols-3 gap-3"},z={class:""},O=["value"],Z={key:0,class:""},G=["required"],J={class:"col-span-2 border-t-2 pt-3"},K={class:"flex items-center justify-end gap-x-3"},Q=["href"];function R(n,s,b,W,t,u){const w=i("Head"),l=i("IError"),_=i("v-select"),v=i("Link"),x=i("DashboardLayout");return d(),a(f,null,[r(w,{title:"Редактирование"}),r(x,null,{default:p(()=>[s[14]||(s[14]=e("div",{class:"mb-6"},[e("h2",{class:"font-bold text-xl"},"Редактирование")],-1)),e("form",{class:"sm:grid sm:grid-cols-2 gap-6",onSubmit:s[8]||(s[8]=S(o=>u.submit(),["prevent"]))},[e("div",j,[s[9]||(s[9]=e("label",{class:"block",for:""},[c("Имя:"),e("span",{class:"font-bold text-red-600"},"*")],-1)),m(e("input",{type:"text",class:"form-controls",required:"","onUpdate:modelValue":s[0]||(s[0]=o=>t.item.name=o)},null,512),[[h,t.item.name]]),r(l,{name:"name",errors:t.errors},null,8,["errors"])]),e("div",A,[s[10]||(s[10]=e("label",{class:"block",for:""},[c("Логин:"),e("span",{class:"font-bold text-red-600"},"*")],-1)),m(e("input",{type:"text",class:"form-controls",required:"","onUpdate:modelValue":s[1]||(s[1]=o=>t.item.login=o)},null,512),[[h,t.item.login]]),r(l,{name:"login",errors:t.errors},null,8,["errors"])]),e("div",F,[s[11]||(s[11]=e("label",{class:"block",for:""},"Пароль:",-1)),m(e("input",{type:"password",class:"form-controls","onUpdate:modelValue":s[2]||(s[2]=o=>t.item.password=o),minlength:"8",onClick:s[3]||(s[3]=o=>o.target.type="text"),onBlur:s[4]||(s[4]=o=>o.target.type="password")},null,544),[[h,t.item.password]]),r(l,{name:"password",errors:t.errors},null,8,["errors"])]),e("div",P,[e("div",T,[e("div",z,[m(e("select",{onChange:s[5]||(s[5]=(...o)=>u.changeShop&&u.changeShop(...o)),class:"form-controls",required:"","onUpdate:modelValue":s[6]||(s[6]=o=>t.item.shop_id=o)},[s[12]||(s[12]=e("option",{value:""},"Выберите торговую точку",-1)),(d(!0),a(f,null,q(b.shops,o=>(d(),a("option",{key:o.id,value:o.id},B(o.name),9,O))),128))],544),[[D,t.item.shop_id]]),r(l,{name:"shop_id",errors:t.errors},null,8,["errors"])]),t.showcases.length>0?(d(),a("div",Z,[r(_,{options:t.showcases,label:"name",searchable:!0,multiple:"",clearable:!1,modelValue:t.item.showcases,"onUpdate:modelValue":s[7]||(s[7]=o=>t.item.showcases=o)},{search:p(({attributes:o,events:y})=>[e("input",L({class:"vs__search",required:t.item.showcases.length===0},o,E(y,!0)),null,16,G)]),_:1},8,["options","modelValue"]),r(l,{name:"showcases",errors:t.errors},null,8,["errors"])])):C("",!0)])]),e("div",J,[e("div",K,[r(v,{class:"dash-btn !bg-gray-300 !text-gray-800",href:n.route("users.index")},{default:p(()=>s[13]||(s[13]=[c("Назад")])),_:1},8,["href"]),e("button",{class:"dash-btn",href:n.route("users.index")}," Сохранить ",8,Q)])])],32)]),_:1})],64)}const ts=N(M,[["render",R]]);export{ts as default};
