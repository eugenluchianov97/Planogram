import{D as V}from"./DashboardLayout-CbK7N0V9.js";import{Z as k,p as i,e as a,o as d,b as t,w as c,a as e,i as C,l as m,g as p,q as f,f as S,F as h,h as q,t as B,A as D,y as L,z as U,s as g,x as E}from"./app-DoIGVFwv.js";import{S as H}from"./sweetalert2-CSiI7rv6.js";import{I}from"./IError-gG1LXeg_.js";import{C as N}from"./vue-select-dStCMpHa.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={components:{DashboardLayout:V,vSelect:N,IError:I,Head:k},props:{shops:{type:Array,default:[]}},data(){return{item:{name:"",login:"",password:"",shop_id:"",showcases:""},showcases:[],errors:[]}},mounted(){},methods:{submit(){g.post(route("users.store"),this.item).then(n=>{H.fire({title:"Пользователь успешно создан",timer:3e3,timerProgressBar:!0,showConfirmButton:!1,icon:"success",toast:!0,position:"top-end"}),E.visit(route("users.index"),{replace:!0})}).catch(n=>{this.errors=n.response.data.errors})},changeShop(){this.item.shop_id&&(this.showcases=[],g.get(route("users.index",{source:"showcases",shop_id:this.item.shop_id})).then(n=>{this.showcases=n.data.showcases}))}}},A={class:""},P={class:""},T={class:""},j={class:"col-span-2 border-t-2 pt-3"},z={class:"grid grid-cols-3 gap-3"},Z={class:""},G=["value"],J={key:0,class:""},K=["required"],O={class:"col-span-2 border-t-2 pt-3"},Q={class:"flex items-center justify-end gap-x-3"},R=["href"];function W(n,s,b,X,r,u){const _=i("Head"),l=i("IError"),v=i("v-select"),w=i("Link"),x=i("DashboardLayout");return d(),a(h,null,[t(_,{title:"Добавить пользователя"}),t(x,null,{default:c(()=>[s[14]||(s[14]=e("div",{class:"mb-6"},[e("h2",{class:"font-bold text-xl"},"Добавить пользователя")],-1)),e("form",{class:"sm:grid sm:grid-cols-2 gap-6",onSubmit:s[8]||(s[8]=C(o=>u.submit(),["prevent"]))},[e("div",A,[s[9]||(s[9]=e("label",{class:"block",for:""},[p("Имя: "),e("span",{class:"font-bold text-red-600"},"*")],-1)),m(e("input",{type:"text",class:"form-controls",required:"","onUpdate:modelValue":s[0]||(s[0]=o=>r.item.name=o)},null,512),[[f,r.item.name]]),t(l,{name:"name",errors:r.errors},null,8,["errors"])]),e("div",P,[s[10]||(s[10]=e("label",{class:"block",for:""},[p("Логин:"),e("span",{class:"font-bold text-red-600"},"*")],-1)),m(e("input",{type:"text",class:"form-controls",required:"","onUpdate:modelValue":s[1]||(s[1]=o=>r.item.login=o)},null,512),[[f,r.item.login]]),t(l,{name:"login",errors:r.errors},null,8,["errors"])]),e("div",T,[s[11]||(s[11]=e("label",{class:"block",for:""},[p("Пароль:"),e("span",{class:"font-bold text-red-600"},"*")],-1)),m(e("input",{type:"password",class:"form-controls",required:"","onUpdate:modelValue":s[2]||(s[2]=o=>r.item.password=o),minlength:"8",onClick:s[3]||(s[3]=o=>o.target.type="text"),onBlur:s[4]||(s[4]=o=>o.target.type="password")},null,544),[[f,r.item.password]]),t(l,{name:"password",errors:r.errors},null,8,["errors"])]),e("div",j,[e("div",z,[e("div",Z,[m(e("select",{onChange:s[5]||(s[5]=(...o)=>u.changeShop&&u.changeShop(...o)),class:"form-controls",required:"","onUpdate:modelValue":s[6]||(s[6]=o=>r.item.shop_id=o)},[s[12]||(s[12]=e("option",{value:""},"Выберите торговую точку",-1)),(d(!0),a(h,null,q(b.shops,o=>(d(),a("option",{key:o.id,value:o.id},B(o.name),9,G))),128))],544),[[D,r.item.shop_id]]),t(l,{name:"shop_id",errors:r.errors},null,8,["errors"])]),r.item.shop_id!=""?(d(),a("div",J,[t(v,{options:r.showcases,label:"name",searchable:!0,multiple:"",clearable:!1,modelValue:r.item.showcases,"onUpdate:modelValue":s[7]||(s[7]=o=>r.item.showcases=o)},{search:c(({attributes:o,events:y})=>[e("input",L({class:"vs__search",required:r.item.showcases.length===0},o,U(y,!0)),null,16,K)]),_:1},8,["options","modelValue"]),t(l,{name:"showcases",errors:r.errors},null,8,["errors"])])):S("",!0)])]),e("div",O,[e("div",Q,[t(w,{class:"dash-btn !bg-gray-300 !text-gray-800",href:n.route("users.index")},{default:c(()=>s[13]||(s[13]=[p("Назад")])),_:1},8,["href"]),e("button",{class:"dash-btn",href:n.route("users.index")}," Сохранить ",8,R)])])],32)]),_:1})],64)}const ts=F(M,[["render",W]]);export{ts as default};
